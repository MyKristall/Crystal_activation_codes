<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Раскрой свой КРИСТАЛЛ ДУШИ</title>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0d1020; --panel:#121636; --ink:#eaf0ff;
    --muted:#a7b0d8; --glow:#ffd966;
    --radius:18px; --gap:14px; --shadow:0 10px 30px rgba(0,0,0,.35);
  }
  body{margin:0;background:#0d1020;color:var(--ink);font-family:Manrope,system-ui,sans-serif;}
  .wrap{max-width:960px;margin:auto;padding:20px}
  h1{text-align:center;margin:20px 0;font-weight:800}
  h1 .glow{color:#ffe69c;text-shadow:0 0 24px rgba(255,217,102,.6)}
  .panel{background:#121636aa;padding:16px;border-radius:18px;box-shadow:var(--shadow);margin:16px 0}
  .row{display:flex;flex-wrap:wrap;gap:14px}
  label{font-size:13px;color:var(--muted)}
  input,select{width:100%;padding:12px;border-radius:12px;border:1px solid #444;background:#0f1533;color:var(--ink)}
  .langbar{display:flex;gap:10px;align-items:center}
  .btn{padding:12px 20px;border-radius:14px;font-weight:800;cursor:pointer;border:0}
  .btn.primary{background:linear-gradient(135deg,#71e2ff,#7afcc5);color:#0b1230}
  .btn.ghost{background:#333;color:#eee}
  .vy{text-align:center;font-size:20px;font-weight:800;margin:10px 0}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
  .cell{aspect-ratio:1/1;border-radius:16px;display:flex;align-items:center;justify-content:center;
    font-size:28px;font-weight:900;color:#0d1020;box-shadow:inset 0 0 0 1px rgba(0,0,0,.25),0 8px 20px rgba(0,0,0,.3);
    background-image: radial-gradient(circle at 50% 45%, rgba(255,255,255,.60), rgba(255,255,255,0) 55%);
  }

  /* Цвета по числу (энергии) */
  .n-1  {background:#ff5757;}   /* красный */
  .n-2  {background:#ff9a2f;}   /* оранжевый */
  .n-3  {background:#ffe34f;}   /* жёлтый */
  .n-4  {background:#b9ff68;}   /* салатовый */
  .n-5  {background:#2f6c3b;color:#fff;} /* тёмно-зелёный */
  .n-6  {background:#89e8e1;}   /* бирюзовый */
  .n-7  {background:#1d41ff;color:#fff;} /* насыщенный синий */
  .n-8  {background:#cfeaff;}   /* светло-голубой */
  .n-9  {background:#9460ff;color:#fff;} /* фиолетовый */
  .n-10 {background:#d8b7e8;}   /* нежный лиловый */
  .n-11 {background:#ff5fb1;}   /* ярко-розовый */
  .n-12 {background:#ffd6df;}   /* светло-розовый */

  .inst h2{margin:0 0 12px}
  .card{padding:14px;border-radius:14px;background:#1d2240}
  .card h3{margin:0 0 8px}
  .card.red h3{color:#ff7d7d}
  .card.blue h3{color:#79a8ff}
  .card.green h3{color:#54e0a3}
  .kv{display:flex;flex-wrap:wrap;gap:8px}
  .pill{padding:4px 10px;border-radius:12px;background:#0f1533;border:1px solid #333}
  .note{text-align:center;margin:10px 0;color:#aaa}
</style>
</head>
<body>
<div class="wrap">
  <h1><span data-i="titleLead">Раскрой свой</span><br><span class="glow">КРИСТАЛЛ ДУШИ</span></h1>

  <section class="panel">
    <div class="row">
      <div class="control" style="flex:2">
        <label data-i="dob">Дата рождения</label>
        <input id="dob" type="date">
      </div>
      <div class="control">
        <label data-i="lang">Язык</label>
        <div class="langbar">
          <select id="lang">
            <option value="ru">Русский</option>
            <option value="uk">Українська</option>
            <option value="bg">Български</option>
            <option value="en">English</option>
          </select>
          <button id="calc" class="btn primary" data-i="calc">Рассчитать</button>
          <button id="pdf" class="btn ghost" data-i="pdf">Скачать PDF</button>
        </div>
      </div>
    </div>
  </section>

  <section class="panel">
    <div class="vy"><span data-i="vy">Уровень Высшего Я:</span> <span id="vyVal">—</span></div>
    <div id="grid" class="grid">
      <div class="cell" id="P10">—</div>
      <div class="cell" id="P11">—</div>
      <div class="cell" id="P12">—</div>

      <div class="cell" id="P7">—</div>
      <div class="cell" id="P8">—</div>
      <div class="cell" id="P9">—</div>

      <div class="cell" id="P4">—</div>
      <div class="cell" id="P5">—</div>
      <div class="cell" id="P6">—</div>

      <div class="cell" id="P1">—</div>
      <div class="cell" id="P2">—</div>
      <div class="cell" id="P3">—</div>
    </div>
  </section>

  <section class="panel inst">
    <h2 data-i="instTitle">Инструкция к кодам</h2>
    <article class="card red">
      <h3 data-i="k1title">1) АКТИВАЦИЯ КРИСТАЛЛА ДУШИ</h3>
      <div id="k1text"></div>
      <div class="kv">
        <span class="pill">N1: <b id="n1">—</b></span>
        <span class="pill">N2: <b id="n2">—</b></span>
        <span class="pill">N3: <b id="n3">—</b></span>
      </div>
    </article>
    <article class="card blue">
      <h3 data-i="k2title">2) ЗАПУСК ТОРСИОННОГО ПОЛЯ</h3>
      <div id="k2text"></div>
      <div class="kv">
        <span class="pill">T1: <b id="t1">—</b></span>
        <span class="pill">T2: <b id="t2">—</b></span>
        <span class="pill">T3: <b id="t3">—</b></span>
      </div>
    </article>
    <article class="card green">
      <h3 data-i="k3title">3) ИНТЕГРАЦИЯ ТЕЛА СВЕТА</h3>
      <div id="k3text"></div>
      <div class="kv">
        <span class="pill">C1: <b id="c1">—</b></span>
        <span class="pill">C2: <b id="c2">—</b></span>
        <span class="pill">C3: <b id="c3">—</b></span>
      </div>
    </article>
  </section>
  <p class="note" data-i="pdfNote">PDF включает матрицу, уровень ВЯ и тексты трёх пунктов.</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script>
const I18N={ru:{titleLead:"Раскрой свой",dob:"Дата рождения",lang:"Язык",calc:"Рассчитать",pdf:"Скачать PDF",vy:"Уровень Высшего Я:",instTitle:"Инструкция к кодам",k1title:"1) АКТИВАЦИЯ КРИСТАЛЛА ДУШИ",k2title:"2) ЗАПУСК ТОРСИОННОГО ПОЛЯ",k3title:"3) ИНТЕГРАЦИЯ ТЕЛА СВЕТА",k1text:(N1,N2,N3)=>`Повтори <b>${N1}</b>, <b>${N2}</b>, <b>${N3}</b> раз.`,k2text:(T1,T2,T3)=>`Повтори <b>${T1}</b>, <b>${T2}</b>, <b>${T3}</b> раз.`,k3text:(C1,C2,C3)=>`Повтори <b>${C1}</b>, <b>${C2}</b>, <b>${C3}</b> раз.`,pdfNote:"PDF включает матрицу, уровень ВЯ и тексты трёх пунктов."},en:{titleLead:"Reveal your",dob:"Date of birth",lang:"Language",calc:"Calculate",pdf:"Download PDF",vy:"Higher Self Level:",instTitle:"Instructions",k1title:"1) SOUL CRYSTAL ACTIVATION",k2title:"2) TORSION FIELD LAUNCH",k3title:"3) LIGHT BODY INTEGRATION",k1text:(N1,N2,N3)=>`Repeat <b>${N1}</b>, <b>${N2}</b>, <b>${N3}</b> times.`,k2text:(T1,T2,T3)=>`Repeat <b>${T1}</b>, <b>${T2}</b>, <b>${T3}</b> times.`,k3text:(C1,C2,C3)=>`Repeat <b>${C1}</b>, <b>${C2}</b>, <b>${C3}</b> times.`,pdfNote:"PDF includes matrix, HS level and texts."}};
function pickLang(){return document.getElementById('lang').value||'ru';}
function applyLang(){const L=pickLang(),t=I18N[L];document.querySelectorAll('[data-i]').forEach(el=>{const k=el.getAttribute('data-i');if(t[k])el.textContent=t[k];});}
const sumDigits=n=>String(n).split('').reduce((a,b)=>a+ +b,0);
const to12=n=>{while(n>12){n=sumDigits(n);}return n||12;};
function buildPositions(iso){const [Y,M,D]=iso.split('-').map(Number);const P1=to12(sumDigits(D));const P2=to12(M);const P3=to12(sumDigits(Y));const P4=to12(P1+P2);const P5=to12(P1+P3);const P6=to12(P2+P3);const P7=to12(P4+P5);const P8=to12(P4+P6);const P9=to12(P5+P6);const P10=to12(P7+P8);const P11=to12(P7+P9);const P12=to12(P8+P9);return{Y,M,D,P1,P2,P3,P4,P5,P6,P7,P8,P9,P10,P11,P12};}
function computeVY({Y,M,D}){const century=Math.floor(Y/100);const tens=Math.floor((Y%100)/10);return D+M+century+tens;}
function computeCodes(P){return{N1:P.P5,N2:P.P8,N3:to12(P.P5+P.P8),T1:to12(P.P8+P.P10+P.P12),T2:to12(P.P1+P.P3+P.P5),T3:to12(P.P8+P.P10+P.P12+P.P1+P.P3+P.P5),C1:to12(P.P2+P.P4+P.P6),C2:to12(P.P7+P.P9+P.P11),C3:to12(P.P2+P.P4+P.P6+P.P7+P.P9+P.P11)};}
function setCell(el,val){el.textContent=val;el.className='cell';el.classList.add(`n-${val}`);}
function drawGrid(P){["P10","P11","P12","P7","P8","P9","P4","P5","P6","P1","P2","P3"].forEach(id=>setCell(document.getElementById(id),P[id]));}
function drawInstructions(P){const L=pickLang(),t=I18N[L];const {N1,N2,N3,T1,T2,T3,C1,C2,C3}=computeCodes(P);document.getElementById('k1text').innerHTML=t.k1text(N1,N2,N3);document.getElementById('k2text').innerHTML=t.k2text(T1,T2,T3);document.getElementById('k3text').innerHTML=t.k3text(C1,C2,C3);['n1','n2','n3','t1','t2','t3','c1','c2','c3'].forEach(id=>document.getElementById(id).textContent=eval(id));}
function recalc(){const iso=document.getElementById('dob').value;if(!iso)return;const P=buildPositions(iso);drawGrid(P);document.getElementById('vyVal').textContent=computeVY(P);drawInstructions(P);}
document.getElementById('calc').onclick=recalc;document.getElementById('lang').onchange=()=>{applyLang();recalc();};
applyLang();
</script>
</body>
</html>
